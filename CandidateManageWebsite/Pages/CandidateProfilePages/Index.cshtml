@page
@model CandidateManageWebsite.Pages.CandidateProfilePages.IndexModel

@{
    ViewData["Title"] = "Index";
    string? roleID = HttpContext.Session.GetString("RoleID");

    if (string.IsNullOrEmpty(roleID) || (roleID != "1" && roleID != "2" && roleID != "3"))
    {
        Response.Redirect("/NoPermission");
    }
}

<h1>Candidate Profile Management</h1>

@{
    if (roleID == "1")
    {
        <p>
            <a asp-page="Create" class="btn btn-primary">Add New Candidate Profile</a>
        </p>
    }
}

<script>
    var roleId = '@roleID';
</script>

<table id="tblCandidateProfile" class="table">
    <thead>
        <tr>
            <th>
                @Html.DisplayNameFor(model => model.CandidateProfile[0].Fullname)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.CandidateProfile[0].Birthday)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.CandidateProfile[0].ProfileShortDescription)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.CandidateProfile[0].ProfileUrl)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.CandidateProfile[0].Posting)
            </th>
            <th></th>
        </tr>
    </thead>
</table>

<script src="~/js/candidateProfile.js"></script>